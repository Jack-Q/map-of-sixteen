var mapOfSixteen=mapOfSixteen||{};mapOfSixteen.main=function(){function d(n,t){t==1?(ot(n),st(1)):t==2&&(ot(n),st(2))}function ut(){function t(n){return 30+192*n}n.mapCustomRatio<=1?(n.mapCtrl.zoomOut=!1,$("div#maps-ctrl-out").addClass("maps-ctrl-unable")):(n.mapCtrl.zoomOut=!0,$("div#maps-ctrl-out").removeClass("maps-ctrl-unable"));n.mapCustomRatio*n.mapRatio>=8?(n.mapCtrl.zoomIn=!0,$("div#maps-ctrl-in").addClass("maps-ctrl-unable")):(n.mapCtrl.zoomIn=!0,$("div#maps-ctrl-in").removeClass("maps-ctrl-unable"));document.writeln;var i=(n.mapCustomRatio-1)/(8/n.mapRatio-1);$("div#maps-ctrl-cur").stop().animate({left:t(i)+"px"})}function o(){var i={width:570,height:480},r,u,o,h,f=v.width(),e=v.height(),t=n.mapRatio*n.mapCustomRatio;n.mapRatio=f/e>i.width/i.height?e/i.height:f/i.width;t/n.mapRatio>1?n.mapCustomRatio=t/n.mapRatio:(n.mapCustomRatio=1,t=n.mapRatio);n.mapPositionTop=e/2-n.mapCenter[1]*t;n.mapPositionLeft=f/2-n.mapCenter[0]*t;r=i.width*t;u=i.height*t;o=n.mapPositionTop;h=n.mapPositionLeft;a.css({width:r,height:u,top:o,left:h});a.SVGMap({mapName:"china",mapWidth:r,mapHeight:u,external:n.mapExternal});ut();s()}function g(t){if(!n.mapCtrl.zoomIn)return!1;var r=n.mapRatio*n.mapCustomRatio;return t&&typeof t=="number"?n.mapCustomRatio=r*t>8?8/n.mapRatio:n.mapCustomRatio*t:(8-r)/n.mapRatio>=.5?n.mapCustomRatio+=.5:n.mapCustomRatio=8/n.mapRatio,o(),i(),!1}function nt(t){if(!n.mapCtrl.zoomOut)return!1;var r=n.mapRatio*n.mapCustomRatio;return t&&typeof t=="number"?n.mapCustomRatio=r*t<=n.mapRatio?1:r*t/n.mapRatio:n.mapCustomRatio>1.5?n.mapCustomRatio-=.5:n.mapCustomRatio=1,o(),i(),!1}function s(){for(var i=[["shanxi",12],["jiangsu",8],["tianjin",6],["jilin",5],["sichuan",5],["shanghai",5],["shandong",4],["beijing",4],["liaoning",3],["shaanxi",3],["hubei",3],["heilongjiang",2],["zhejiang",2],["hunan",2],["guangdong",2],["anhui",2],["henan",1],["macau",1],["fujian",1],["hebei",0],["gansu",0],["jiangxi",0],["guizhou",0],["qinghai",0],["hainan",0],["chongqing",0],["ningxia",0],["neimongol",0],["guangxi",0],["xinjiang",0],["hongkong",0],["taiwan",0],["xizang",0],["yunnan",0],],r=["81b2e4","6ca6e0","5b9cdc","4a91d9","3d8ad6","3182d3","2b7aca","2975c2","2770b9","256bb1","2466a8","2261a0","215e9c","205c97","1f5993",],t=0;t<i.length;t++)n.mapExternal[i[t][0]].attr({fill:"#"+r[i[t][1]]});n.provinceSelected!=""&&n.mapExternal[n.provinceSelected].attr({fill:"#FEB41C"})}function i(){var r,u,t,i;if(n.pointDrawType.type=="all")for(t=0;t<n.cityList.length;t++)n.cityList[t].node.css({top:n.mapPositionTop+n.cityList[t].coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+n.cityList[t].coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"});else if(n.pointDrawType.type=="province")for(r=n.provinceList[n.pointDrawType.info][0],t=0;t<n.cityList.length;t++)i=n.cityList[t],i.province==r?n.cityList[t].node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"}):n.cityList[t].node.css({display:"none"});else if(n.pointDrawType.type=="person")for(u=n.personData[n.pointDrawType.info].city,t=0;t<n.cityList.length;t++)i=n.cityList[t],i.fullName==u?n.cityList[t].node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"}):n.cityList[t].node.css({display:"none"})}function ft(t){var r,i,u;if(b.empty(),t)for(r=0;r<n.cityList.length;r++)i=n.cityList[r],u='<div class="maps-tag maps-tag-'+i.tipPos+'"><div class="maps-infoBox">',u+=i.fullName+"<\/div><\/div>",u=$(u),i.node=u,b.append(i.node),i.node.tap(function(n){return function(t){return ct(n),t.preventDefault(),!1}}(r)),i.node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"});else for(r=0;r<n.cityList.length;r++)i=n.cityList[r],u='<div class="maps-tag maps-tag-'+i.tipPos+'"><div class="maps-infoBox">',u+=i.fullName+"<\/div><\/div>",u=$(u),i.node=u,b.append(i.node),i.node.click(function(n){return function(t){return ct(n),t.preventDefault(),!1}}(r)),i.node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"})}function et(){o();i()}function at(t){f.text(n.provinceList[t][1]);u.removeClass("ctrl-list-province-box-on");n.province=!1;n.pointDrawType.type="province";n.pointDrawType.info=t;i();n.personFitleType.type="province";n.personFitleType.info=t;r();n.provinceSelected=n.provinceList[t][0];s();$("div#maps-showAll").fadeIn(300)}function r(){var i,t;if(n.personFitleType.type=="all")for(t=0;t<n.personData.length;t++)n.personData[t].node.removeClass("ctrl-nameitem-off");else if(n.personFitleType.type=="province")for(t=0;t<n.personData.length;t++)n.personData[t].province==n.provinceList[n.personFitleType.info][0]?n.personData[t].node.removeClass("ctrl-nameitem-off"):n.personData[t].node.addClass("ctrl-nameitem-off");else if(n.personFitleType.type=="school")for(t=0;t<n.personData.length;t++)n.personData[t].school==n.personFitleType.info?n.personData[t].node.removeClass("ctrl-nameitem-off"):n.personData[t].node.addClass("ctrl-nameitem-off");else if(n.personFitleType.type=="search")for(i=n.personFitleType.info,t=i.length-1;t>=0;t--)n.personData[i[t]].node.prependTo($(n.personData[i[t]].node.parent()))}function tt(){switch(n.infoTab){case 2:$("span#info-link-1").removeClass("info-link-on");$("span#info-link-2").addClass("info-link-on");$("div#info-page").css("left","-100%");break;case 1:default:$("span#info-link-1").addClass("info-link-on");$("span#info-link-2").removeClass("info-link-on");$("div#info-page").css("left","0");n.infoTab=1}}function ot(t){var i=n.personData[t],r;$("#info-name").text(i.name);$("#info-school").text(i.school+(i.major?"("+i.major+")":""));r=!0;i.qq?(r=!1,$("#info-qq-box").removeClass("info-cont-item-off"),$("#info-qq").text(i.qq)):$("#info-qq-box").addClass("info-cont-item-off");i.email?(r=!1,$("#info-mail-box").removeClass("info-cont-item-off"),$("#info-mail").text(i.email).attr({href:"mailto:"+i.email,title:"向"+i.name+"发送邮件"})):$("#info-mail-box").addClass("info-cont-item-off");i.phone?(r=!1,$("#info-phone-box").removeClass("info-cont-item-off"),$("#info-phone").text(i.phone),i.phonePos?$("#info-phone-name").text("电话("+i.phonePos+")"):$("#info-phone-name").text("电话")):$("#info-phone-box").addClass("info-cont-item-off");i.phone2?(r=!1,$("#info-phone2-box").removeClass("info-cont-item-off"),$("#info-phone2").text(i.phone2),i.phone2Pos?$("#info-phone2-name").text("电话 2("+i.phone2Pos+")"):$("#info-phone2-name").text("电话 2")):$("#info-phone2-box").addClass("info-cont-item-off");i.address?(r=!1,$("#info-address-box").removeClass("info-cont-item-off"),$("#info-address").text(i.address)):$("#info-address-box").addClass("info-cont-item-off");i.wechat?(r=!1,$("#info-wechat-box").removeClass("info-cont-item-off"),$("#info-wechat").text(i.wechat)):$("#info-wechat-box").addClass("info-cont-item-off");r===!0?$("div#info-cont-nullTip").css("display","block"):$("div#info-cont-nullTip").css("display","none");i.detailPage?($("#info-page-tip").css("display","none"),$("#info-page-ext").css("display","block").attr("src","person/page/"+i.detailPage+".html")):($("#info-page-tip").css("display","block"),$("#info-page-ext").css("display","none"));i.backgroundPhoto&&i.backgroundPhoto!=0?$("#info-banner").attr("src","person/img/"+i.backgroundPhoto+".jpg"):$("#info-banner").attr("src","img/background/"+(Math.random()*9+.5).toFixed(0)+".jpg")}function st(t){t!=undefined&&t!=n.infoTab&&(n.infoTab=t,tt());n.infoBox==!1&&(rt.addClass("info-box-on"),n.infoBox=!0)}function ht(){$("div#maps-pop-box-wrapper").fadeOut(300)}function ct(t){var u=n.cityList[t],f,i,r;for($("div#maps-pop-title").text(u.fullName),$("div#maps-pop-box").css("background-position-x","-"+(u.picture-1)*300+"px"),f=$("div.maps-pop-personlist"),f.empty(),i=0;i<n.personData.length;i++)n.personData[i].city==u.fullName&&(r="<span>"+n.personData[i].name+"<\/span>",r=$(r).click(function(n){return function(){d(n,1)}}(i)),r.appendTo(f));$("div#maps-pop-box-wrapper").fadeIn(300)}function vt(){for(var t,i=0;i<n.personData.length;i++)t='<div class="ctrl-nameitem">',k=n.personData[i],t+="<div onclick=\"__jq_person_call('COT',"+i+')" class="name-photo',t+=k.photo?'" style=\'background:url("img/photoGroup.v2.jpg") no-repeat;background-position:-'+(75*k.photo-75)+"px 0;'><\/div>":'-default"><\/div>',t+="<div onclick=\"__jq_person_call('COT',"+i+')" class="name-name">'+k.name+"<\/div>",t+='<div class="name-school">'+(k.school?k.school:"")+"<\/div>",t+='<div class="name-major">'+(k.major?k.major:"")+"<\/div>",t+='<div class="name-linkbox"><span class="name-button" onclick="__jq_person_call(\'MAP\','+i+')">地图定位<\/span>',t+='<span class="name-button" onclick="__jq_person_call(\'DET\','+i+')">详细信息<\/span>',t+='<span class="name-button" onclick="__jq_person_call(\'COT\','+i+')">联系方式<\/span><\/div><\/div>',t=$(t),k.node=t,t.appendTo(y);for(i=0;i<n.provinceList.length;i++)t='<div class="ctrl-list-item">'+n.provinceList[i][1]+"<\/div>",t=$(t),t.click(function(n){return function(){at(n)}}(i)),$(u.children()[0]).append($(t))}function yt(){var n=navigator.userAgent.toLowerCase(),t,f,i,e,r,o,u,s;return n.indexOf("mobile")!=-1?!0:(n.indexOf("iphone")!=-1||n.indexOf("ipod")!=-1||n.indexOf("android")!=-1)&&n.indexOf("applewebkit")!=-1?!0:n.indexOf("blackberry")!=-1?(t=/version\/(\d+)/.exec(n),t!=null&&(f=parseInt(t[1]),f>=6&&n.indexOf("applewebkit")!=-1))?!0:!1:n.indexOf("windows phone os")!=-1||n.indexOf("iemobile")!=-1?(i=/iemobile\/(\d+)/.exec(n),i!=null&&(e=parseInt(i[1]),e>=9))?!0:!1:n.indexOf("opera mobi")!=-1?(r=/presto\/(\d+\.\d+)/.exec(n),r!=null&&(o=parseFloat(r[1]),o>=2.4))?!0:!1:n.indexOf("fennec")!=-1&&(u=/fennec\/(\d+\.\d+)/.exec(n),u!=null&&(s=parseFloat(u[1]),s>=1))?!0:!1}function c(){var e,t;if(n.search){for(n.search=!1,y.css("height","380px"),it.css({height:"10px","margin-top":"10px"}),n.pointDrawType.type="all",p.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),i(),f.text("选择省份"),n.school&&(h.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(u.removeClass("ctrl-list-province-box-on"),n.province=!1),e=[],t=0;t<n.personData.length;t++)e.push(t);n.personFitleType.type="search";n.personFitleType.info=e;r();n.personFitleType.type="all";r();n.provinceSelected="";s();$("div#maps-closeSearch").fadeOut(300);$("#ctrl-search-text").val("")}return!1}function pt(){var e,t;for(n.search=!0,y.css("height","300px"),it.css({height:"70px","margin-top":"30px"}),p.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),f.text("选择省份"),n.school&&(h.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(u.removeClass("ctrl-list-province-box-on"),n.province=!1),n.provinceSelected="",s(),$("div#maps-showAll").fadeOut(300),$("div#maps-closeSearch").fadeIn(300),n.pointDrawType.type="all",i(),n.personFitleType.type="all",r(),e=[],t=0;t<n.personData.length;t++)e.push(t);return n.personFitleType.type="search",n.personFitleType.info=e,r(),$("#ctrl-search-text").val(""),!1}function lt(){var u=$("#ctrl-search-text").val().trim().toLowerCase(),s=$("div#ctrl-search-description"),t;if(u=="")return s.html("输入姓名、学校、电话号码等信息以开始。<br />支持拼音搜索，结果排在下方列表最前"),!1;var c=function(n,t){for(var i=0;i<t.length;i++)if(n.indexOf(t[i])==-1)return!1;return!0},h=function(n,t){for(var i=n.trim().split(" "),u="",f="",e="",r=0;r<i.length;r++)if(u+=i[r][0],f+=i[r].match(/^([zcs][h]|[bpmfdtnlgkhjqxzcsrywae])(.*)$/)[1],e+=i[r].match(/^([zcs][h]|[bpmfdtnlgkhjqxzcsryw]|[ae]n[g]?|a[oi]?|e[ir]?)(.*)$/)[1],i.slice(r,i.length).join("").slice(0,t.length)==t)return!0;return u.indexOf(t)!=-1||f.indexOf(t)!=-1||e.indexOf(t)!=-1?!0:!1},e=[],i=[],f=[],o;for(t=0;t<n.personData.length;t++)i.push(t);if(u.match(/^[0-9]{1,}$/)){for(t=0;t<i.length;t++)n.personData[i[t]].phone&&n.personData[i[t]].phone.toString().slice(0,u.length)==u?e.push(i[t]):f.push(i[t]);for(i=JSON.parse(JSON.stringify(f)),t=0;t<i.length;t++)n.personData[i[t]].qq&&n.personData[i[t]].qq.toString().slice(0,u.length)==u&&e.push(i[t]);o="搜索数字:"+u+"("+e.length+"个符合项)<br />依次匹配电话、QQ"}else if(u.match(/^[a-z]{1,}$/)){for(t=0;t<i.length;t++)h(n.personData[i[t]].namePY,u)?e.push(i[t]):f.push(i[t]);for(i=JSON.parse(JSON.stringify(f)),f=[],t=0;t<i.length;t++)n.personData[i[t]].majorPY&&h(n.personData[i[t]].majorPY,u)&&e.push(i[t]);o="搜索拼音:"+u+"("+e.length+"个符合项)<br />依次匹配姓名、专业"}else if(u.match(/^[\u4e00-\u9fa5]{1,}$/)){for(t=0;t<i.length;t++)n.personData[i[t]].name.slice(0,u.length)==u?e.push(i[t]):f.push(i[t]);for(i=JSON.parse(JSON.stringify(f)),f=[],t=0;t<i.length;t++)n.personData[i[t]].name.indexOf(u)!=-1?e.push(i[t]):f.push(i[t]);for(i=JSON.parse(JSON.stringify(f)),f=[],t=0;t<i.length;t++)n.personData[i[t]].major&&n.personData[i[t]].major.indexOf(u)!=-1?e.push(i[t]):f.push(i[t]);for(i=JSON.parse(JSON.stringify(f)),f=[],t=0;t<i.length;t++)c(n.personData[i[t]].school,u)?e.push(i[t]):f.push(i[t]);for(i=JSON.parse(JSON.stringify(f)),t=0;t<i.length;t++)n.personData[i[t]].city.slice(0,u.length)==u&&e.push(i[t]);o="搜索:"+u+"("+e.length+"个符合项)<br />依次匹配姓名、专业、学校、城市"}return o=o||'Sorry! 没有理解您的输入.<br />尝试输入"'+[133,150,186,170][Math.floor(Math.random()*4)]+'","'+["beijing","ty","tianjin","shanxidaxue"][Math.floor(Math.random()*4)]+'","'+["上海","南大","工程","技术"][Math.floor(Math.random()*4)]+'"',n.personFitleType.info=e,s.html(o),r(),y.scrollTop(0),!1}var n={ctrl:!1,province:!1,school:!1,search:!1,infoBox:!1,aboutBox:!1,infoTab:1,mapRatio:0,mapCustomRatio:1,mapPositionTop:0,mapPositionLeft:0,mapCenter:[285,240],mapCtrl:{zoomIn:!0,zoomOut:!1,pos:0},touchCount:0,mapDrag:!1,mapDragPos:[0,0],mapPinch:!1,mapPinchDist:0,personData:mapOfSixteen.data,cityList:[{name:"hangzhou",fullName:"杭州",namePY:"hang zhou",picture:1,coordinateX:475,coordinateY:301,tipPos:"bottom",province:"zhejiang"},{name:"tianjin",fullName:"天津",namePY:"tian jin",picture:2,coordinateX:425,coordinateY:194,tipPos:"right",province:"tianjin"},{name:"chengdu",fullName:"成都",namePY:"cheng du",picture:3,coordinateX:307,coordinateY:305,tipPos:"bottom",province:"sichuan"},{name:"taiyuan",fullName:"太原",namePY:"tai yuan",picture:4,coordinateX:380,coordinateY:217,tipPos:"top",province:"shanxi"},{name:"shanghai",fullName:"上海",namePY:"shang hai",picture:5,coordinateX:486,coordinateY:287,tipPos:"right",province:"shanghai"},{name:"weihai",fullName:"威海",namePY:"wei hai",picture:6,coordinateX:477,coordinateY:208,tipPos:"right",province:"shandong"},{name:"jinan",fullName:"济南",namePY:"ji nan",picture:7,coordinateX:430,coordinateY:221,tipPos:"top",province:"shandong"},{name:"xian",fullName:"西安",namePY:"xi an ",picture:8,coordinateX:351,coordinateY:263,tipPos:"top",province:"shaanxi"},{name:"yangling",fullName:"杨凌",namePY:"yang ling",picture:9,coordinateX:339,coordinateY:265,tipPos:"left",province:"shaanxi"},{name:"macau",fullName:"澳门",namePY:"ao men",picture:10,coordinateX:413,coordinateY:417,tipPos:"bottom",province:"macau"},{name:"dalian",fullName:"大连",namePY:"da lian",picture:11,coordinateX:470,coordinateY:183,tipPos:"top",province:"liaoning"},{name:"changchun",fullName:"长春",namePY:"chang chun",picture:12,coordinateX:491,coordinateY:116,tipPos:"top",province:"jilin"},{name:"jilin",fullName:"吉林",namePY:"ji lin",picture:13,coordinateX:499,coordinateY:117,tipPos:"right",province:"jilin"},{name:"zhenjiang",fullName:"镇江",namePY:"zhen jiang",picture:14,coordinateX:468,coordinateY:275,tipPos:"top",province:"jiangsu"},{name:"xuzhou",fullName:"徐州",namePY:"xu zhou",picture:15,coordinateX:442,coordinateY:254,tipPos:"top",province:"jiangsu"},{name:"wuxi",fullName:"无锡",namePY:"wu xi ",picture:16,coordinateX:474,coordinateY:281,tipPos:"right",province:"jiangsu"},{name:"nanjing",fullName:"南京",namePY:"nan jing",picture:17,coordinateX:469,coordinateY:282,tipPos:"left",province:"jiangsu"},{name:"changsha",fullName:"长沙",namePY:"chang sha",picture:18,coordinateX:394,coordinateY:333,tipPos:"left",province:"hunan"},{name:"wuhan",fullName:"武汉",namePY:"wu han",picture:19,coordinateX:408,coordinateY:304,tipPos:"left",province:"hubei"},{name:"zhengzhou",fullName:"郑州",namePY:"zheng zhou",picture:20,coordinateX:399,coordinateY:255,tipPos:"left",province:"henan"},{name:"harbin",fullName:"哈尔滨",namePY:"ha er bin",picture:21,coordinateX:493,coordinateY:92,tipPos:"top",province:"heilongjiang"},{name:"zhuhai",fullName:"珠海",namePY:"zhu hai",picture:22,coordinateX:408,coordinateY:411,tipPos:"left",province:"guangdong"},{name:"guangzhou",fullName:"广州",namePY:"guang zhou",picture:23,coordinateX:411,coordinateY:398,tipPos:"right",province:"guangdong"},{name:"beijing",fullName:"北京",namePY:"bei jing",picture:24,coordinateX:414,coordinateY:182,tipPos:"top",province:"beijing"},{name:"fuxin",fullName:"阜新",namePY:"fu xin",picture:25,coordinateX:464,coordinateY:149,tipPos:"left",province:"liaoning"},{name:"hefei",fullName:"合肥",namePY:"he fei",picture:26,coordinateX:436,coordinateY:284,tipPos:"left",province:"anhui"},{name:"fuzhou",fullName:"福州",namePY:"fu zhou",picture:27,coordinateX:472,coordinateY:355,tipPos:"top",province:"fujian"},{name:"wuhu",fullName:"芜湖",namePY:"wu hu",picture:28,coordinateX:447,coordinateY:290,tipPos:"right",province:"anhui"},],provinceList:[["heilongjiang","黑龙江","hei long jiang"],["jilin","吉林","ji lin"],["liaoning","辽宁","liao ning"],["shandong","山东","shan dong"],["jiangsu","江苏","jiang su"],["zhejiang","浙江","zhe jiang"],["anhui","安徽","an hui"],["henan","河南","he nan"],["shanxi","山西","shan xi"],["shaanxi","陕西","shan xi"],["hubei","湖北","hu bei"],["fujian","福建","fu jian"],["hunan","湖南","hu nan"],["sichuan","四川","si chuan"],["shanghai","上海","shang hai"],["tianjin","天津","tian jin"],["beijing","北京","bei jing"],["guangdong","广东","gaung dong"],["macau","澳门","ao men"],],pointDrawType:{type:"all",info:0},personFitleType:{type:"all",info:0},provinceSelected:"",mapExternal:{}},w=$("div#ctrl-box"),it=$("div#ctrl-search"),l=$("span#ctrl-toggle"),u=$("div#ctrl-province"),wt=$("div#maps-box"),a=$("div#maps-china"),b=$("div#maps-points"),v=$(window),y=$("div#ctrl-namelist"),u=$("div#ctrl-province"),h=$("div#ctrl-ctrl-school"),f=$("span#ctrl-province-button"),p=$("span#ctrl-school-button"),rt=$("div#info-box"),t;window.__jq_person_call=function(t,r){var f,u;switch(t){case"MAP":for(n.pointDrawType.type="person",n.pointDrawType.info=r,u=0;u<n.cityList.length;u++)f=n.cityList[u],f.fullName==n.personData[r].city&&(n.mapRatio*n.mapCustomRatio<6&&(n.mapCustomRatio=6/n.mapRatio,ut()),n.mapCenter=[f.coordinateX,f.coordinateY]);if(v.width()<700){for(l.removeClass("ctrl-open-on"),w.removeClass("ctrl-box-on"),u=0;u<n.personData.length;u++)n.personData[u].node.addClass("ctrl-nameitem-off");n.ctrl=!1}o();i();$("div#maps-showAll").fadeIn(300);break;case"DET":d(r,2);break;case"COT":d(r,1)}};t=yt();v.resize(et);l.bind(t?"tap":"click",function(){if(n.ctrl){c();l.removeClass("ctrl-open-on");w.removeClass("ctrl-box-on");for(var t=0;t<n.personData.length;t++)n.personData[t].node.addClass("ctrl-nameitem-off");n.ctrl=!1}else l.addClass("ctrl-open-on"),w.addClass("ctrl-box-on"),r(),n.ctrl=!0;return!1});$("span#ctrl-nation-button").bind(t?"tap":"click",function(){return n.pointDrawType.type="all",p.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),i(),f.text("选择省份"),n.school&&(h.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(u.removeClass("ctrl-list-province-box-on"),n.province=!1),n.personFitleType.type="all",r(),n.provinceSelected="",s(),$("div#maps-showAll").fadeOut(300),c(),!1});f.bind(t?"tap":"click",function(){if(c(),n.school&&(h.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province){u.removeClass("ctrl-list-province-box-on");n.province=!1;return}return u.addClass("ctrl-list-province-box-on"),n.province=!0,!1});$("div#info-close").bind(t?"tap":"click",function(){return n.infoBox&&(rt.removeClass("info-box-on"),n.infoBox=!1),!1});$("span#info-link-1").bind(t?"tap":"click",function(){return n.infoTab=1,tt(),!1});$("span#info-link-2").bind(t?"tap":"click",function(){return n.infoTab=2,tt(),!1});$("div#about-close").bind(t?"tap":"click",function(){return n.aboutBox=!1,$("div#about-box").removeClass("about-box-on"),!1});$("div#ctrl-about").bind(t?"tap":"click",function(){return n.aboutBox=!0,$("div#about-box").addClass("about-box-on"),!1});$("div#maps-pop-close").bind(t?"tap":"click",ht);$("div#maps-ctrl-in").bind(t?"tap":"click",g);$("div#maps-ctrl-out").bind(t?"tap":"click",nt);$("div#maps-showAll").fadeOut(50);$("div#maps-closeSearch").fadeOut(50);$("div#maps-showAll").bind(t?"tap":"click",function(){return n.pointDrawType.type="all",p.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),i(),f.text("选择省份"),n.school&&(h.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(u.removeClass("ctrl-list-province-box-on"),n.province=!1),n.personFitleType.type="all",r(),n.provinceSelected="",s(),$("div#maps-showAll").fadeOut(300),!1});$("div#maps-closeSearch").bind(t?"tap":"click",function(){c()});$("div#ctrl-search-button").bind(t?"tap":"click",function(){n.search?c():pt()});document.getElementById("ctrl-search-text").oninput=function(){window.setImmediate?setImmediate(lt):setTimeout(lt,20)};t?($("div#maps-points").touchstart(function(t){t.preventDefault();n.touchCount=t.originalEvent.touches.length;n.touchCount==1?(n.mapDrag=!0,n.mapPinch=!1,n.mapDragPos=[t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY]):n.touchCount==2&&(n.mapDrag=!1,n.mapPinch=!0,n.mapPinchDist=(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)*(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)+(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY)*(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY))}).touchmove(function(t){var u,f,r;if(t.preventDefault(),n.touchCount==1&&n.mapDrag==!0){if(Math.abs(-n.mapDragPos[0]+t.originalEvent.touches[0].pageX)<15&&Math.abs(-n.mapDragPos[1]+t.originalEvent.touches[0].pageY)<15)return!1;u=t.originalEvent.touches[0].pageX-n.mapDragPos[0];f=t.originalEvent.touches[0].pageY-n.mapDragPos[1];n.mapPositionLeft=n.mapPositionLeft+u;n.mapPositionTop=n.mapPositionTop+f;n.mapCenter[0]-=u/(n.mapRatio*n.mapCustomRatio);n.mapCenter[1]-=f/(n.mapRatio*n.mapCustomRatio);a.css({top:n.mapPositionTop+"px",left:n.mapPositionLeft+"px"});n.mapDragPos[0]=t.originalEvent.touches[0].pageX;n.mapDragPos[1]=t.originalEvent.touches[0].pageY;i()}else if(n.touchCount==2)if(r=(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)*(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)+(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY)*(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY),Math.abs(r-n.mapPinch)>100)r>n.mapPinchDist?g(Math.sqrt(r/n.mapPinchDist)):r<n.mapPinchDist&&nt(Math.sqrt(r/n.mapPinchDist)),n.mapPinchDist=r;else return!1;return!1}).touchend(function(){e.preventDefault();n.mapDrag=!1;n.mapPinch=!1}),ft(t),$("div#maps-ctrl-pos").click(function(t){var r=t.offsetX;return r<4&&(r=4),r>196&&(r=196),r=(r-4)/192,n.mapCustomRatio=(8/n.mapRatio-1)*r+1,o(),i(),!1})):($("div#maps-points").mousedown(function(t){return n.mapDrag=!0,n.mapDragPos=[t.pageX,t.pageY],!1}).mousemove(function(t){if(n.mapDrag===!1)return!1;var r=t.pageX-n.mapDragPos[0],u=t.pageY-n.mapDragPos[1];return n.mapPositionLeft=n.mapPositionLeft+r,n.mapPositionTop=n.mapPositionTop+u,n.mapCenter[0]-=r/(n.mapRatio*n.mapCustomRatio),n.mapCenter[1]-=u/(n.mapRatio*n.mapCustomRatio),a.css({top:n.mapPositionTop+"px",left:n.mapPositionLeft+"px"}),n.mapDragPos[0]=t.pageX,n.mapDragPos[1]=t.pageY,i(),!1}).mouseup(function(){return n.mapDrag=!1,!1}),$("div#maps-ctrl-pos").mousedown(function(t){var r=t.offsetX;return r<4&&(r=4),r>196&&(r=196),r=(r-4)/192,n.mapCustomRatio=(8/n.mapRatio-1)*r+1,o(),i(),!1}),ft(t),$("div#maps-points").mousewheel(function(n,t){t>0?g():t<0&&nt()}));et();vt();ht()};mapOfSixteen.welcome=function(){var t=[$("#welcome-page-1"),$("#welcome-page-2"),$("#welcome-page-3"),$("#welcome-page-4"),],n=0;$("#welcome-page-btn").click(function(){t[n].addClass("welcome-page-out");n++;n==t.length&&setTimeout(function(){$("#welcome-screen").fadeOut(50)},1500)})},function(){mapOfSixteen.loader.update(5)}();