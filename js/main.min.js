var mapOfSixteen=mapOfSixteen||{};mapOfSixteen.main=function(){function g(n,t){t==1?(lt(n),at(1)):t==2&&(lt(n),at(2))}function d(t){function u(n){return 30+192*n}var i=t?n.mapTargetRatio:n.mapCustomRatio,r;i<=1?(n.mapCtrl.zoomOut=!1,$("#maps-ctrl-out").addClass("maps-ctrl-unable")):(n.mapCtrl.zoomOut=!0,$("#maps-ctrl-out").removeClass("maps-ctrl-unable"));i*n.mapRatio>=8?(n.mapCtrl.zoomIn=!0,$("#maps-ctrl-in").addClass("maps-ctrl-unable")):(n.mapCtrl.zoomIn=!0,$("#maps-ctrl-in").removeClass("maps-ctrl-unable"));r=(i-1)/(8/n.mapRatio-1);$("#maps-ctrl-cur").css({left:u(r)+"px"})}function o(){var r={width:570,height:480},u,f,s,h,e=t.width(),o=t.height(),i=n.mapRatio*n.mapCustomRatio;n.mapRatio=e/o>r.width/r.height?o/r.height:e/r.width;i/n.mapRatio>1?n.mapCustomRatio=i/n.mapRatio:(n.mapCustomRatio=1,i=n.mapRatio);n.mapPositionLeft=e/2-n.mapCenter[0]*i;n.mapPositionTop=o/2-n.mapCenter[1]*i;u=r.width*i;f=r.height*i;s=n.mapPositionTop;h=n.mapPositionLeft;w.css({width:u,height:f,top:s,left:h});w.SVGMap({mapName:"china",mapWidth:u,mapHeight:f,external:n.mapExternal});d();c()}function nt(i,u,f){if(!n.mapCtrl.zoomIn)return!1;var e=n.mapRatio*n.mapCustomRatio,s=n.mapCustomRatio;return f&&typeof f=="number"?n.mapCustomRatio=e*f>8?8/n.mapRatio:n.mapCustomRatio*f:(8-e)/n.mapRatio>=.5?n.mapCustomRatio+=.5:n.mapCustomRatio=8/n.mapRatio,f=n.mapCustomRatio/s,n.mapCenter[0]=n.mapCenter[0]-(t.width()/2-i)/e*(1-1/f),n.mapCenter[1]=n.mapCenter[1]-(t.height()/2-u)/e*(1-1/f),o(),r(),!1}function ot(t,i,r,f){if(f=f===undefined?300:f,!n.mapCtrl.zoomIn)return!1;var o=n.mapRatio*n.mapCustomRatio,e;e=r&&typeof r=="number"?o*r>8?8/n.mapRatio:n.mapCustomRatio*r:(8-o)/n.mapRatio>=.5?n.mapCustomRatio+.5:8/n.mapRatio;f===0?s(e/n.mapCustomRatio,t,i,function(){},0):s(e/n.mapCustomRatio,t,i,function(){u.css({"-ms-transform":"scale(1)","-o-transform":"scale(1)","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"});nt(t,i,r)})}function tt(i,u,f){if(!n.mapCtrl.zoomOut)return!1;var e=n.mapRatio*n.mapCustomRatio,s=n.mapCustomRatio;return f&&typeof f=="number"?n.mapCustomRatio=e*f<=n.mapRatio?1:e*f/n.mapRatio:n.mapCustomRatio>1.5?n.mapCustomRatio-=.5:n.mapCustomRatio=1,f=n.mapCustomRatio/s,n.mapCenter[0]=n.mapCenter[0]-(t.width()/2-i)/e*(1-1/f),n.mapCenter[1]=n.mapCenter[1]-(t.height()/2-u)/e*(1-1/f),o(),r(),!1}function st(t,i,r,f){if(f=f===undefined?300:f,!n.mapCtrl.zoomOut)return!1;var o=n.mapRatio*n.mapCustomRatio,e;e=r&&typeof r=="number"?o*r<=n.mapRatio?1:o*r/n.mapRatio:n.mapCustomRatio>1.5?n.mapCustomRatio-.5:1;f===0?s(e/n.mapCustomRatio,t,i,function(){},0):s(e/n.mapCustomRatio,t,i,function(){u.css({"-ms-transform":"scale(1)","-o-transform":"scale(1)","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"});tt(t,i,r)})}function c(){for(var i=[["shanxi",12],["jiangsu",8],["tianjin",6],["jilin",5],["sichuan",5],["shanghai",5],["shandong",4],["beijing",4],["liaoning",3],["shaanxi",3],["hubei",3],["heilongjiang",2],["zhejiang",2],["hunan",2],["guangdong",2],["anhui",2],["henan",1],["macau",1],["fujian",1],["hebei",0],["gansu",0],["jiangxi",0],["guizhou",0],["qinghai",0],["hainan",0],["chongqing",0],["ningxia",0],["neimongol",0],["guangxi",0],["xinjiang",0],["hongkong",0],["taiwan",0],["xizang",0],["yunnan",0],],r=["81b2e4","6ca6e0","5b9cdc","4a91d9","3d8ad6","3182d3","2b7aca","2975c2","2770b9","256bb1","2466a8","2261a0","215e9c","205c97","1f5993"],t=0;t<i.length;t++)n.mapExternal[i[t][0]].attr({fill:"#"+r[i[t][1]]});n.provinceSelected!=""&&n.mapExternal[n.provinceSelected].attr({fill:"#FEB41C"})}function r(){var r,u,t,i;if(n.pointDrawType.type=="all")for(t=0;t<n.cityList.length;t++)n.cityList[t].node.css({top:n.mapPositionTop+n.cityList[t].coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+n.cityList[t].coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"});else if(n.pointDrawType.type=="province")for(r=n.provinceList[n.pointDrawType.info][0],t=0;t<n.cityList.length;t++)i=n.cityList[t],i.province==r?n.cityList[t].node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"}):n.cityList[t].node.css({display:"none"});else if(n.pointDrawType.type=="person")for(u=n.personData[n.pointDrawType.info].city,t=0;t<n.cityList.length;t++)i=n.cityList[t],i.fullName==u?n.cityList[t].node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"}):n.cityList[t].node.css({display:"none"})}function ht(t){var u,i,r,f,e;for(ft.empty(),u=0;u<n.cityList.length;u++){for(i=n.cityList[u],f=0,e=0;f<n.personData.length;f++)n.personData[f].city==i.fullName&&e++;r='<div class="maps-tag maps-tag-'+i.tipPos+'"><\/div>';r=$(r).text(e);i.fullName.length>2?r.append($("<div>").text(i.fullName).addClass("maps-infoBox").css("width",14*i.fullName.length+"px")):r.append($("<div>").text(i.fullName).addClass("maps-infoBox"));i.node=r;ft.append(i.node);i.node.bind(t?"tap":"click",function(n){return function(t){return pt(n),t.preventDefault(),!1}}(u));i.node.css({top:n.mapPositionTop+i.coordinateY*n.mapRatio*n.mapCustomRatio-30+"px",left:n.mapPositionLeft+i.coordinateX*n.mapRatio*n.mapCustomRatio-10+"px",display:"block"})}}function ct(){o();r()}function yt(t){h.text(n.provinceList[t][1]);e.removeClass("ctrl-list-province-box-on");n.province=!1;n.pointDrawType.type="province";n.pointDrawType.info=t;r();n.personFitleType.type="province";n.personFitleType.info=t;f();n.provinceSelected=n.provinceList[t][0];c();$("#maps-showAll").fadeIn(300)}function f(){var i,t;if(n.personFitleType.type=="all")for(t=0;t<n.personData.length;t++)n.personData[t].node.removeClass("ctrl-nameItem-off");else if(n.personFitleType.type=="province")for(t=0;t<n.personData.length;t++)n.personData[t].province==n.provinceList[n.personFitleType.info][0]?n.personData[t].node.removeClass("ctrl-nameItem-off"):n.personData[t].node.addClass("ctrl-nameItem-off");else if(n.personFitleType.type=="school")for(t=0;t<n.personData.length;t++)n.personData[t].school==n.personFitleType.info?n.personData[t].node.removeClass("ctrl-nameItem-off"):n.personData[t].node.addClass("ctrl-nameItem-off");else if(n.personFitleType.type=="search")for(i=n.personFitleType.info,t=i.length-1;t>=0;t--)n.personData[i[t]].node.prependTo($(n.personData[i[t]].node.parent()))}function it(){switch(n.infoTab){case 2:$("#info-link-1").removeClass("info-link-on");$("#info-link-2").addClass("info-link-on");$("#info-page").css("left","-100%");break;case 1:default:$("#info-link-1").addClass("info-link-on");$("#info-link-2").removeClass("info-link-on");$("#info-page").css("left","0");n.infoTab=1}}function lt(t){var i=n.personData[t],r;$("#info-name").text(i.name);$("#info-school").text(i.school+(i.major?"("+i.major+")":""));r=!0;i.qq?(r=!1,$("#info-qq-box").removeClass("info-cont-item-off"),$("#info-qq").text(i.qq).attr({href:"tencent://message/?uin="+i.qq,title:"向"+i.name+"发起即时聊天"})):$("#info-qq-box").addClass("info-cont-item-off");i.email?(r=!1,$("#info-mail-box").removeClass("info-cont-item-off"),$("#info-mail").text(i.email).attr({href:"mailto:"+i.email,title:"向"+i.name+"发送邮件"})):$("#info-mail-box").addClass("info-cont-item-off");i.phone?(r=!1,$("#info-phone-box").removeClass("info-cont-item-off"),$("#info-phone").text(i.phone),i.phonePos?$("#info-phone-name").text("电话("+i.phonePos+")"):$("#info-phone-name").text("电话")):$("#info-phone-box").addClass("info-cont-item-off");i.phone2?(r=!1,$("#info-phone2-box").removeClass("info-cont-item-off"),$("#info-phone2").text(i.phone2),i.phone2Pos?$("#info-phone2-name").text("电话("+i.phone2Pos+")"):$("#info-phone2-name").text("电话")):$("#info-phone2-box").addClass("info-cont-item-off");i.address?(r=!1,$("#info-address-box").removeClass("info-cont-item-off"),$("#info-address").text(i.address)):$("#info-address-box").addClass("info-cont-item-off");i.wechat?(r=!1,$("#info-wechat-box").removeClass("info-cont-item-off"),$("#info-wechat").text(i.wechat)):$("#info-wechat-box").addClass("info-cont-item-off");r===!0?$("#info-cont-nullTip").css("display","block"):$("#info-cont-nullTip").css("display","none");i.detailPage?($("#info-page-tip").css("display","none"),$("#info-page-ext").css("display","block").attr("src","person/page/"+i.detailPage+".html")):($("#info-page-tip").css("display","block"),$("#info-page-ext").css("display","none"));i.backgroundPhoto&&i.backgroundPhoto!=0?$("#info-banner").attr("src","person/img/"+i.backgroundPhoto+".jpg"):$("#info-banner").attr("src","img/background/"+(Math.random()*9+.5).toFixed(0)+".jpg")}function at(t){t!=undefined&&t!=n.infoTab&&(n.infoTab=t,it());n.infoBox==!1&&(et.addClass("info-box-on"),n.infoBox=!0)}function rt(){$("#maps-pop-box-wrapper").fadeOut(300)}function pt(t){var u=n.cityList[t],f,i,r;for($("#maps-pop-title").text(u.fullName),$("#maps-pop-box").css("background-position-x","-"+(u.picture-1)*300+"px"),f=$("div.maps-pop-personList"),f.empty(),i=0;i<n.personData.length;i++)n.personData[i].city==u.fullName&&(r="<span>"+n.personData[i].name+"<\/span>",r=$(r).click(function(n){return function(){g(n,1)}}(i)),r.appendTo(f));$("#maps-pop-box-wrapper").fadeIn(300)}function wt(t){for(var u,f,r,i=0;i<n.personData.length;i++)u=n.personData[i],f=$("<div>").data("id",i).bind(t?"tap":"click",v.contact),u.photo?f.addClass("name-photo").css({"background-image":'url("img/photoGroup.v2.jpg")',"background-position":75-75*u.photo+"px 0"}):f.addClass("name-photo-default"),r=$("<div>").append(f).append($("<div>").data("id",i).bind(t?"tap":"click",v.contact).text(u.name).addClass("name-name")),u.school&&r.append($("<div>").text(u.school?u.school:"").addClass("name-school")),u.major&&r.append($("<div>").text(u.major?u.major:"").addClass("name-major")),r.append($("<div>").addClass("name-linkBox").append($("<span>").text("地图定位").bind(t?"tap":"click",v.map).data("id",i)).append($("<span>").text("详细信息").bind(t?"tap":"click",v.detail).data("id",i)).append($("<span>").text("联系方式").bind(t?"tap":"click",v.contact).data("id",i))).addClass("ctrl-nameItem"),u.node=r,b.append(r);for(i=0;i<n.provinceList.length;i++)r='<div class="ctrl-list-item">'+n.provinceList[i][1]+"<\/div>",r=$(r),r.click(function(n){return function(){yt(n)}}(i)),$(e.children()[0]).append($(r))}function bt(){var n=navigator.userAgent.toLowerCase(),t,f,i,e,r,o,u,s;return n.indexOf("mobile")!=-1?!0:(n.indexOf("iphone")!=-1||n.indexOf("ipod")!=-1||n.indexOf("android")!=-1)&&n.indexOf("applewebkit")!=-1?!0:n.indexOf("blackberry")!=-1?(t=/version\/(\d+)/.exec(n),t!=null&&(f=parseInt(t[1]),f>=6&&n.indexOf("applewebkit")!=-1))?!0:!1:n.indexOf("windows phone os")!=-1||n.indexOf("iemobile")!=-1?(i=/iemobile\/(\d+)/.exec(n),i!=null&&(e=parseInt(i[1]),e>=9))?!0:!1:n.indexOf("opera mobi")!=-1?(r=/presto\/(\d+\.\d+)/.exec(n),r!=null&&(o=parseFloat(r[1]),o>=2.4))?!0:!1:n.indexOf("fennec")!=-1&&(u=/fennec\/(\d+\.\d+)/.exec(n),u!=null&&(s=parseFloat(u[1]),s>=1))?!0:!1}function y(){var i,t;if(n.search){for(n.search=!1,b.css("height","380px"),ut.css({height:"10px","margin-top":"10px"}),n.pointDrawType.type="all",k.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),r(),h.text("选择省份"),n.school&&(a.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(e.removeClass("ctrl-list-province-box-on"),n.province=!1),i=[],t=0;t<n.personData.length;t++)i.push(t);n.personFitleType.type="search";n.personFitleType.info=i;f();n.personFitleType.type="all";f();n.provinceSelected="";c();$("#maps-closeSearch").fadeOut(300);$("#ctrl-search-text").val("")}return!1}function kt(){var i,t;for(n.search=!0,b.css("height","300px"),ut.css({height:"70px","margin-top":"30px"}),k.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),h.text("选择省份"),n.school&&(a.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(e.removeClass("ctrl-list-province-box-on"),n.province=!1),n.provinceSelected="",c(),$("#maps-showAll").fadeOut(300),$("#maps-closeSearch").fadeIn(300),n.pointDrawType.type="all",r(),n.personFitleType.type="all",f(),i=[],t=0;t<n.personData.length;t++)i.push(t);return n.personFitleType.type="search",n.personFitleType.info=i,f(),$("#ctrl-search-text").val(""),!1}function vt(){var r=$("#ctrl-search-text").val().trim().toLowerCase(),s=$("#ctrl-search-description"),t;if(r=="")return s.html("输入姓名、学校、电话号码等信息以开始。<br />支持拼音搜索，结果排在下方列表最前"),!1;var c=function(n,t){for(var i=0;i<t.length;i++)if(n.indexOf(t[i])==-1)return!1;return!0},h=function(n,t){for(var i=n.trim().split(" "),u="",f="",e="",r=0;r<i.length;r++)if(u+=i[r][0],f+=i[r].match(/^([zcs][h]|[bpmfdtnlgkhjqxzcsrywae])(.*)$/)[1],e+=i[r].match(/^([zcs][h]|[bpmfdtnlgkhjqxzcsryw]|[ae]n[g]?|a[oi]?|e[ir]?)(.*)$/)[1],i.slice(r,i.length).join("").slice(0,t.length)==t)return!0;return!!(u.indexOf(t)!=-1||f.indexOf(t)!=-1||e.indexOf(t)!=-1)},e=[],i=[],u=[],o;for(t=0;t<n.personData.length;t++)i.push(t);if(r.match(/^[0-9]+$/)){for(t=0;t<i.length;t++)n.personData[i[t]].phone&&n.personData[i[t]].phone.toString().slice(0,r.length)==r?e.push(i[t]):u.push(i[t]);for(i=JSON.parse(JSON.stringify(u)),t=0;t<i.length;t++)n.personData[i[t]].qq&&n.personData[i[t]].qq.toString().slice(0,r.length)==r&&e.push(i[t]);o="搜索数字:"+r+"("+e.length+"个符合项)<br />依次匹配电话、QQ"}else if(r.match(/^[a-z]+$/)){for(t=0;t<i.length;t++)h(n.personData[i[t]].namePY,r)?e.push(i[t]):u.push(i[t]);for(i=JSON.parse(JSON.stringify(u)),t=0;t<i.length;t++)n.personData[i[t]].majorPY&&h(n.personData[i[t]].majorPY,r)&&e.push(i[t]);o="搜索拼音:"+r+"("+e.length+"个符合项)<br />依次匹配姓名、专业"}else if(r.match(/^[\u4e00-\u9fa5]+$/)){for(t=0;t<i.length;t++)n.personData[i[t]].name.slice(0,r.length)==r?e.push(i[t]):u.push(i[t]);for(i=JSON.parse(JSON.stringify(u)),u=[],t=0;t<i.length;t++)n.personData[i[t]].name.indexOf(r)!=-1?e.push(i[t]):u.push(i[t]);for(i=JSON.parse(JSON.stringify(u)),u=[],t=0;t<i.length;t++)n.personData[i[t]].major&&n.personData[i[t]].major.indexOf(r)!=-1?e.push(i[t]):u.push(i[t]);for(i=JSON.parse(JSON.stringify(u)),u=[],t=0;t<i.length;t++)c(n.personData[i[t]].school,r)?e.push(i[t]):u.push(i[t]);for(i=JSON.parse(JSON.stringify(u)),t=0;t<i.length;t++)n.personData[i[t]].city.slice(0,r.length)==r&&e.push(i[t]);o="搜索:"+r+"("+e.length+"个符合项)<br />依次匹配姓名、专业、学校、城市"}return o=o||'Sorry! 没有理解您的输入.<br />尝试输入"'+[133,150,186,170][Math.floor(Math.random()*4)]+'","'+["beijing","ty","tianjin","shanxidaxue"][Math.floor(Math.random()*4)]+'","'+["上海","南大","工程","技术"][Math.floor(Math.random()*4)]+'"',n.personFitleType.info=e,s.html(o),f(),b.scrollTop(0),!1}function s(t,i,r,f,e){function o(){var i=(new Date-s)/e;if(i>1){u.css({"-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")",transform:"scale("+t+")"});window.cancelAnimationFrame(h);f();return}u.css({"-ms-transform":"scale("+(1+i*(t-1))+")","-o-transform":"scale("+(1+i*(t-1))+")","-webkit-transform":"scale("+(1+i*(t-1))+")","-moz-transform":"scale("+(1+i*(t-1))+")",transform:"scale("+(1+i*(t-1))+")"});n.mapTargetRatio=(1+i*(t-1))*n.mapCustomRatio;d(!0);requestAnimationFrame(o)}e=e!==undefined?e:400;f=f?f:function(){};u.css({"-ms-transform-origin":i+"px "+r+"px","o-transform-origin":i+"px "+r+"px","-webkit-transform-origin":i+"px "+r+"px","-moz-transform-origin":i+"px "+r+"px","transform-origin":i+"px "+r+"px"});e===0&&(u.css({"-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")",transform:"scale("+t+")"}),d(!0));window.requestAnimationFrame||+function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();var s=new Date,h=window.requestAnimationFrame(o)}var n={ctrl:!1,province:!1,school:!1,search:!1,infoBox:!1,aboutBox:!1,infoTab:1,mapRatio:0,mapCustomRatio:1,mapTargetRatio:1,mapPositionTop:0,mapPositionLeft:0,mapCenter:[285,240],mapCtrl:{zoomIn:!0,zoomOut:!1,pos:0},touchCount:0,mapDrag:!1,mapDragPos:[0,0],mapPinch:!1,mapPinchDist:0,mapCtrlDrag:!1,mapCtrlDragPos:0,personData:mapOfSixteen.data,cityList:[{name:"hangzhou",fullName:"杭州",namePY:"hang zhou",picture:1,coordinateX:475,coordinateY:301,tipPos:"bottom",province:"zhejiang"},{name:"tianjin",fullName:"天津",namePY:"tian jin",picture:2,coordinateX:425,coordinateY:194,tipPos:"right",province:"tianjin"},{name:"chengdu",fullName:"成都",namePY:"cheng du",picture:3,coordinateX:307,coordinateY:305,tipPos:"bottom",province:"sichuan"},{name:"taiyuan",fullName:"太原",namePY:"tai yuan",picture:4,coordinateX:380,coordinateY:217,tipPos:"top",province:"shanxi"},{name:"shanghai",fullName:"上海",namePY:"shang hai",picture:5,coordinateX:486,coordinateY:287,tipPos:"right",province:"shanghai"},{name:"weihai",fullName:"威海",namePY:"wei hai",picture:6,coordinateX:477,coordinateY:208,tipPos:"right",province:"shandong"},{name:"jinan",fullName:"济南",namePY:"ji nan",picture:7,coordinateX:430,coordinateY:221,tipPos:"top",province:"shandong"},{name:"xian",fullName:"西安",namePY:"xi an ",picture:8,coordinateX:351,coordinateY:263,tipPos:"top",province:"shaanxi"},{name:"yangling",fullName:"杨凌",namePY:"yang ling",picture:9,coordinateX:339,coordinateY:265,tipPos:"left",province:"shaanxi"},{name:"macau",fullName:"澳门",namePY:"ao men",picture:10,coordinateX:413,coordinateY:417,tipPos:"bottom",province:"macau"},{name:"dalian",fullName:"大连",namePY:"da lian",picture:11,coordinateX:470,coordinateY:183,tipPos:"top",province:"liaoning"},{name:"changchun",fullName:"长春",namePY:"chang chun",picture:12,coordinateX:491,coordinateY:116,tipPos:"top",province:"jilin"},{name:"jilin",fullName:"吉林",namePY:"ji lin",picture:13,coordinateX:499,coordinateY:117,tipPos:"right",province:"jilin"},{name:"zhenjiang",fullName:"镇江",namePY:"zhen jiang",picture:14,coordinateX:468,coordinateY:275,tipPos:"top",province:"jiangsu"},{name:"xuzhou",fullName:"徐州",namePY:"xu zhou",picture:15,coordinateX:442,coordinateY:254,tipPos:"top",province:"jiangsu"},{name:"wuxi",fullName:"无锡",namePY:"wu xi ",picture:16,coordinateX:474,coordinateY:281,tipPos:"right",province:"jiangsu"},{name:"nanjing",fullName:"南京",namePY:"nan jing",picture:17,coordinateX:469,coordinateY:282,tipPos:"left",province:"jiangsu"},{name:"changsha",fullName:"长沙",namePY:"chang sha",picture:18,coordinateX:394,coordinateY:333,tipPos:"left",province:"hunan"},{name:"wuhan",fullName:"武汉",namePY:"wu han",picture:19,coordinateX:408,coordinateY:304,tipPos:"left",province:"hubei"},{name:"zhengzhou",fullName:"郑州",namePY:"zheng zhou",picture:20,coordinateX:399,coordinateY:255,tipPos:"left",province:"henan"},{name:"harbin",fullName:"哈尔滨",namePY:"ha er bin",picture:21,coordinateX:493,coordinateY:92,tipPos:"top",province:"heilongjiang"},{name:"zhuhai",fullName:"珠海",namePY:"zhu hai",picture:22,coordinateX:408,coordinateY:411,tipPos:"left",province:"guangdong"},{name:"guangzhou",fullName:"广州",namePY:"guang zhou",picture:23,coordinateX:411,coordinateY:398,tipPos:"right",province:"guangdong"},{name:"beijing",fullName:"北京",namePY:"bei jing",picture:24,coordinateX:414,coordinateY:182,tipPos:"top",province:"beijing"},{name:"fuxin",fullName:"阜新",namePY:"fu xin",picture:25,coordinateX:464,coordinateY:149,tipPos:"left",province:"liaoning"},{name:"hefei",fullName:"合肥",namePY:"he fei",picture:26,coordinateX:436,coordinateY:284,tipPos:"left",province:"anhui"},{name:"fuzhou",fullName:"福州",namePY:"fu zhou",picture:27,coordinateX:472,coordinateY:355,tipPos:"top",province:"fujian"},{name:"wuhu",fullName:"芜湖",namePY:"wu hu",picture:28,coordinateX:447,coordinateY:290,tipPos:"right",province:"anhui"}],provinceList:[["heilongjiang","黑龙江","hei long jiang"],["jilin","吉林","ji lin"],["liaoning","辽宁","liao ning"],["shandong","山东","shan dong"],["jiangsu","江苏","jiang su"],["zhejiang","浙江","zhe jiang"],["anhui","安徽","an hui"],["henan","河南","he nan"],["shanxi","山西","shan xi"],["shaanxi","陕西","shan xi"],["hubei","湖北","hu bei"],["fujian","福建","fu jian"],["hunan","湖南","hu nan"],["sichuan","四川","si chuan"],["shanghai","上海","shang hai"],["tianjin","天津","tian jin"],["beijing","北京","bei jing"],["guangdong","广东","gaung dong"],["macau","澳门","ao men"]],pointDrawType:{type:"all",info:0},personFitleType:{type:"all",info:0},provinceSelected:"",mapExternal:{}},p=$("#ctrl-box"),ut=$("#ctrl-search"),l=$("#ctrl-toggle"),u=$("#maps-box"),w=$("#maps-china"),ft=$("#maps-points"),t=$(window),b=$("#ctrl-nameList"),e=$("#ctrl-province"),a=$("#ctrl-ctrl-school"),h=$("#ctrl-province-button"),k=$("#ctrl-school-button"),et=$("#info-box"),v={contact:function(n){g($(n.target).data("id"),1)},map:function(i){var f,u;for(id=$(i.target).data("id"),n.pointDrawType.type="person",n.pointDrawType.info=id,u=0;u<n.cityList.length;u++)f=n.cityList[u],f.fullName==n.personData[id].city&&(n.mapRatio*n.mapCustomRatio<6&&(n.mapCustomRatio=6/n.mapRatio,d()),n.mapCenter=[f.coordinateX,f.coordinateY]);if(t.width()<700){for(l.removeClass("ctrl-open-on"),p.removeClass("ctrl-box-on"),u=0;u<n.personData.length;u++)n.personData[u].node.addClass("ctrl-nameItem-off");n.ctrl=!1}o();r();$("#maps-showAll").fadeIn(300)},detail:function(n){g($(n.target).data("id"),2)}},i=bt();t.resize(ct);l.bind(i?"tap":"click",function(){if(n.ctrl){y();l.removeClass("ctrl-open-on");p.removeClass("ctrl-box-on");for(var t=0;t<n.personData.length;t++)n.personData[t].node.addClass("ctrl-nameItem-off");n.ctrl=!1}else l.addClass("ctrl-open-on"),p.addClass("ctrl-box-on"),f(),n.ctrl=!0;return!1});$("span#ctrl-nation-button").bind(i?"tap":"click",function(){return n.pointDrawType.type="all",k.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),r(),h.text("选择省份"),n.school&&(a.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(e.removeClass("ctrl-list-province-box-on"),n.province=!1),n.personFitleType.type="all",f(),n.provinceSelected="",c(),$("#maps-showAll").fadeOut(300),y(),!1});h.bind(i?"tap":"click",function(){if(y(),n.school&&(a.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province){e.removeClass("ctrl-list-province-box-on");n.province=!1;return}return e.addClass("ctrl-list-province-box-on"),n.province=!0,!1});$("#info-close").bind(i?"tap":"click",function(){return n.infoBox&&(et.removeClass("info-box-on"),n.infoBox=!1),!1});$("#info-link-1").bind(i?"tap":"click",function(){return n.infoTab=1,it(),!1});$("#info-link-2").bind(i?"tap":"click",function(){return n.infoTab=2,it(),!1});$("#about-close").bind(i?"tap":"click",function(){return n.aboutBox=!1,$("#about-box").removeClass("about-box-on"),!1});$("#ctrl-about").bind(i?"tap":"click",function(){return n.aboutBox=!0,$("#about-box").addClass("about-box-on"),!1});$("#maps-pop-close").bind(i?"tap":"click",rt);$("#maps-pop-box-wrapper").bind(i?"tap":"click",rt);$("#maps-ctrl-in").bind(i?"tap":"click",function(){ot(t.width()/2,t.height()/2)});$("#maps-ctrl-out").bind(i?"tap":"click",function(){st(t.width()/2,t.height()/2)});$("#maps-showAll").fadeOut(50);$("#maps-closeSearch").fadeOut(50);$("#maps-showAll").bind(i?"tap":"click",function(){return n.pointDrawType.type="all",k.css("display","none").text("选择省份"),$("span#ctrl-gt").css("display","none"),r(),h.text("选择省份"),n.school&&(a.removeClass("ctrl-list-school-box-on"),n.school=!1),n.province&&(e.removeClass("ctrl-list-province-box-on"),n.province=!1),n.personFitleType.type="all",f(),n.provinceSelected="",c(),$("#maps-showAll").fadeOut(300),!1});$("#maps-closeSearch").bind(i?"tap":"click",function(){y()});$("#ctrl-search-button").bind(i?"tap":"click",function(){n.search?y():kt()});document.getElementById("ctrl-search-text").oninput=function(){window.setImmediate?setImmediate(vt):setTimeout(vt,20)};i?($("#maps-points").touchstart(function(t){t.preventDefault();n.touchCount=t.originalEvent.touches.length;n.touchCount==1?(n.mapDrag=!0,n.mapPinch=!1,n.mapDragPos=[t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY]):n.touchCount==2&&(n.mapDrag=!1,n.mapPinch=!0,n.mapPinchDist=(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)*(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)+(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY)*(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY))}).touchmove(function(t){var f,e,i,u;if(t.preventDefault(),n.touchCount==1&&n.mapDrag==!0){if(Math.abs(-n.mapDragPos[0]+t.originalEvent.touches[0].pageX)<15&&Math.abs(-n.mapDragPos[1]+t.originalEvent.touches[0].pageY)<15)return!1;f=t.originalEvent.touches[0].pageX-n.mapDragPos[0];e=t.originalEvent.touches[0].pageY-n.mapDragPos[1];n.mapPositionLeft=n.mapPositionLeft+f;n.mapPositionTop=n.mapPositionTop+e;n.mapCenter[0]-=f/(n.mapRatio*n.mapCustomRatio);n.mapCenter[1]-=e/(n.mapRatio*n.mapCustomRatio);w.css({top:n.mapPositionTop+"px",left:n.mapPositionLeft+"px"});n.mapDragPos[0]=t.originalEvent.touches[0].pageX;n.mapDragPos[1]=t.originalEvent.touches[0].pageY;r()}else if(n.touchCount==2&&n.mapPinch==!0)if(i=(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)*(t.originalEvent.touches[0].pageX-t.originalEvent.touches[1].pageX)+(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY)*(t.originalEvent.touches[0].pageY-t.originalEvent.touches[1].pageY),u=n.mapPinchVirtualDist===undefined?n.mapPinchDist:n.mapPinchVirtualDist,Math.abs(i-u)>100)i>u?ot((t.originalEvent.touches[0].pageX+t.originalEvent.touches[1].pageX)/2,(t.originalEvent.touches[0].pageY+t.originalEvent.touches[1].pageY)/2,Math.sqrt(i/u),0):st((t.originalEvent.touches[0].pageX+t.originalEvent.touches[1].pageX)/2,(t.originalEvent.touches[0].pageY+t.originalEvent.touches[1].pageY)/2,Math.sqrt(i/u),0),n.mapPinchVirtualDist=i,n.mapPinchCenter=[(t.originalEvent.touches[0].pageX+t.originalEvent.touches[1].pageX)/2,(t.originalEvent.touches[0].pageY+t.originalEvent.touches[1].pageY)/2];else return!1;else n.mapPinch&&$("#maps-points").touchend();return!1}).touchend(function(t){n.mapPinch&&(u.css({"-ms-transform":"scale(1)","-o-transform":"scale(1)","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"}),n.mapPinchVirtualDist>n.mapPinchDist?nt(n.mapPinchCenter[0],n.mapPinchCenter[1],n.mapPinchVirtualDist/n.mapPinchDist):tt(n.mapPinchCenter[0],n.mapPinchCenter[1],n.mapPinchVirtualDist/n.mapPinchDist),n.mapPinchVirtualDist=undefined,t.preventDefault());n.mapPinch=!1;n.mapDrag=!1}),ht(i),$("#maps-ctrl-pos").bind("tap",function(i){var f=i.offsetX||i.pageX-$("#maps-ctrl-pos").offset().left;return f<4&&(f=4),f>196&&(f=196),f=(f-4)/192,n.mapTargetRatio=(8/n.mapRatio-1)*f+1,s(n.mapTargetRatio/n.mapCustomRatio,t.width()/2,t.height()/2,function(){u.css({"-ms-transform":"scale(1)","-o-transform":"scale(1)","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"});n.mapCustomRatio=(8/n.mapRatio-1)*f+1;o();r()}),!1})):($("#maps-points").mousedown(function(t){return n.mapDrag=!0,n.mapDragPos=[t.pageX,t.pageY],!1}).mousemove(function(t){if(n.mapDrag===!1)return!1;var i=t.pageX-n.mapDragPos[0],u=t.pageY-n.mapDragPos[1];return n.mapPositionLeft=n.mapPositionLeft+i,n.mapPositionTop=n.mapPositionTop+u,n.mapCenter[0]-=i/(n.mapRatio*n.mapCustomRatio),n.mapCenter[1]-=u/(n.mapRatio*n.mapCustomRatio),w.css({top:n.mapPositionTop+"px",left:n.mapPositionLeft+"px"}),n.mapDragPos[0]=t.pageX,n.mapDragPos[1]=t.pageY,r(),!1}).mouseup(function(){return n.mapDrag=!1,!1}),$("#maps-ctrl-pos").mousedown(function(i){var f=i.offsetX||i.pageX-$("#maps-ctrl-pos").offset().left;return f<4&&(f=4),f>196&&(f=196),f=(f-4)/192,n.mapTargetRatio=(8/n.mapRatio-1)*f+1,s(n.mapTargetRatio/n.mapCustomRatio,t.width()/2,t.height()/2,function(){u.css({"-ms-transform":"scale(1)","-o-transform":"scale(1)","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"});n.mapCustomRatio=(8/n.mapRatio-1)*f+1;o();r()}),!1}),$(document).bind({mousedown:function(t){if(t.target.id=="maps-ctrl-cur")return n.mapCtrlDrag=!0,n.mapCtrlDragPos=t.offsetX||t.pageX-$("#maps-ctrl-cur").offset().left,t.preventDefault(),!1},mousemove:function(i){var r,u;return n.mapCtrlDrag===!1?!1:(r=i.pageX-n.mapCtrlDragPos-$("#maps-ctrl-bar").offset().left,r>192)?(n.mapCustomRatio=8/n.mapRatio,$(document).mouseup(),!1):r<0?(n.mapCustomRatio=1,$(document).mouseup(),!1):(u=r/192,n.mapTargetRatio=(8/n.mapRatio-1)*u+1,s((1+7*u)/(n.mapCustomRatio*n.mapRatio),t.width()/2,t.height()/2,function(){},0),!1)},mouseup:function(){if(n.mapCtrlDrag!=!1)return n.mapCtrlDrag=!1,n.mapCustomRatio=n.mapTargetRatio,u.css({"-ms-transform":"scale(1)","-o-transform":"scale(1)","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"}),o(),r(),!1}}),ht(i),$("#maps-points").mousewheel(function(n,t){var i=n.pageX,r=n.pageY;t>0?nt(i,r):t<0&&tt(i,r)}));ct();wt(i);rt();t.width()>700&&(l.addClass("ctrl-open-on"),p.addClass("ctrl-box-on"),f(),n.ctrl=!0)};mapOfSixteen.welcome=function(){var t=[$("#welcome-page-1"),$("#welcome-page-2"),$("#welcome-page-3"),$("#welcome-page-4")],n=0;$("#welcome-page-btn").click(function(){n!=t.length&&(t[n].addClass("welcome-page-out"),n++,n==t.length&&setTimeout(function(){$("#welcome-screen").fadeOut(50)},1500))})};mapOfSixteen.loaderInformation.isCache||function(){mapOfSixteen.loader.update(5)}();
//# sourceMappingURL=main.min.js.map
